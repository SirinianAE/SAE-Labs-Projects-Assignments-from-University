package outputManager;

import java.awt.Color;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartFrame;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.CategoryPlot;
import org.jfree.chart.plot.PiePlot;
import org.jfree.data.category.DefaultCategoryDataset;
import org.jfree.data.general.DefaultPieDataset;

import taxpayer.Taxpayer;

//TODO change all creat to create
public class ChartCreator{
	private Taxpayer outputManagerTaxpayer;
	
	public void createPieChart(){
		DefaultPieDataset pieDataset = new DefaultPieDataset();
		pieDataset.setValue("Entertainment; " + outputManagerTaxpayer.
				getCategoryReceiptAmountPaid("Entertainment"),
				outputManagerTaxpayer.getCategoryReceiptAmountPaid(
						"Entertainment"));
		pieDataset.setValue("Basic; " + outputManagerTaxpayer.
				getCategoryReceiptAmountPaid("Basic"),
				outputManagerTaxpayer.getCategoryReceiptAmountPaid(
						"Basic"));
		pieDataset.setValue("Travel; " + outputManagerTaxpayer.
				getCategoryReceiptAmountPaid("Travel"),
				outputManagerTaxpayer.getCategoryReceiptAmountPaid(
						"Travel"));
		pieDataset.setValue("Health; " + outputManagerTaxpayer.
				getCategoryReceiptAmountPaid("Health"),
				outputManagerTaxpayer.getCategoryReceiptAmountPaid(
						"Health"));
		pieDataset.setValue("Other; " + outputManagerTaxpayer.
				getCategoryReceiptAmountPaid("Other"),
				outputManagerTaxpayer.getCategoryReceiptAmountPaid(
						"Other"));
		JFreeChart chart = ChartFactory.createPieChart("Pie Chart",
				pieDataset, true, true, true);
		PiePlot plot = (PiePlot) chart.getPlot();
		ChartFrame frame = new ChartFrame("Pie Chart", chart);
		frame.setVisible(true);
		frame.setSize(450, 500);
	}
	
	public void createBarChart(){
		DefaultCategoryDataset dataset = new DefaultCategoryDataset();
		dataset.setValue(outputManagerTaxpayer.getBasicTax(), "",
				"Basic Tax");
		dataset.setValue(outputManagerTaxpayer.getTaxIncrease(), "",
				"Tax increase");
		dataset.setValue(outputManagerTaxpayer.getTotalTax(), "",
				"Total tax");
		JFreeChart chart = ChartFactory.createBarChart("", "",
				"Tax analysis in $", dataset);
		CategoryPlot p = chart.getCategoryPlot();
		p.setRangeGridlinePaint(Color.black);
		ChartFrame frame = new ChartFrame("", chart);
		frame.setVisible(true);
		frame.setSize(450,500);
	}
	
	public void setOutputManagerTaxpayer(
			Taxpayer outputManagerTaxpayer)
	{
		this.outputManagerTaxpayer = outputManagerTaxpayer;
	}
}